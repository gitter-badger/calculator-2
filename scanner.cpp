/* Generated by re2c 0.13.5 on Mon Oct 27 20:29:00 2014 */
#line 1 "scanner.re"
#include "scanner.h"

namespace scanner
{
const char* TOKEN_NAMES[] =
{
#define TOKEN(x) #x,
    TOKENS
#undef TOKEN
};

CToken scan(const std::string& expression, size_t& offset)
{
    std::string::const_pointer marker;
    std::string::const_pointer cursor = expression.c_str() + offset;
    std::string::const_pointer p_start = expression.c_str() + offset;
    size_t start = offset;


#line 23 "scanner.cpp"
    {
        unsigned char yych;
        unsigned int yyaccept = 0;

        yych = (unsigned char)*cursor;
        switch (yych) {
        case 0x00:    goto yy24;
        case '\t':
        case ' ':    goto yy3;
        case '\n':    goto yy22;
        case '!':    goto yy17;
        case '"':    goto yy9;
        case '(':    goto yy18;
        case ')':    goto yy20;
        case '*':
        case '+':
        case '-':
        case '/':    goto yy12;
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy7;
        case '<':    goto yy14;
        case '=':    goto yy16;
        case '>':    goto yy15;
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'G':
        case 'H':
        case 'I':
        case 'J':
        case 'K':
        case 'L':
        case 'M':
        case 'N':
        case 'O':
        case 'P':
        case 'Q':
        case 'R':
        case 'S':
        case 'U':
        case 'V':
        case 'W':
        case 'X':
        case 'Y':
        case 'Z':
        case '_':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'g':
        case 'h':
        case 'i':
        case 'j':
        case 'k':
        case 'l':
        case 'm':
        case 'n':
        case 'o':
        case 'p':
        case 'q':
        case 'r':
        case 's':
        case 'u':
        case 'v':
        case 'w':
        case 'x':
        case 'y':
        case 'z':    goto yy11;
        case 'F':
        case 'f':    goto yy6;
        case 'T':
        case 't':    goto yy4;
        default:    goto yy26;
        }
yy2:
#line 41 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_SPACE, expression.substr(start, cursor - p_start)); }
#line 113 "scanner.cpp"
yy3:
        yych = (unsigned char)*++cursor;
        goto yy52;
yy4:
        ++cursor;
        switch ((yych = (unsigned char)*cursor)) {
        case 'R':
        case 'r':    goto yy49;
        default:    goto yy29;
        }
yy5:
#line 46 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_IDENTIFIER, expression.substr(start, cursor - p_start)); }
#line 127 "scanner.cpp"
yy6:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'A':
        case 'a':    goto yy44;
        default:    goto yy29;
        }
yy7:
        yyaccept = 0;
        yych = (unsigned char)*(marker = ++cursor);
        switch (yych) {
        case '.':    goto yy38;
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy36;
        default:    goto yy39;
        }
yy8:
#line 43 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_FLOAT, expression.substr(start, cursor - p_start)); }
#line 155 "scanner.cpp"
yy9:
        yyaccept = 1;
        yych = (unsigned char)*(marker = ++cursor);
        goto yy31;
yy10:
#line 52 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_ERROR, expression.substr(start, cursor - p_start)); }
#line 163 "scanner.cpp"
yy11:
        yych = (unsigned char)*++cursor;
        goto yy29;
yy12:
        ++cursor;
yy13:
#line 47 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_OPERATION, expression.substr(start, cursor - p_start)); }
#line 172 "scanner.cpp"
yy14:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '=':    goto yy27;
        default:    goto yy13;
        }
yy15:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '=':    goto yy27;
        default:    goto yy13;
        }
yy16:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '=':    goto yy27;
        default:    goto yy10;
        }
yy17:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '=':    goto yy27;
        default:    goto yy10;
        }
yy18:
        ++cursor;
#line 48 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_LEFT_PARENTHESIS, expression.substr(start, cursor - p_start)); }
#line 201 "scanner.cpp"
yy20:
        ++cursor;
#line 49 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_RIGHT_PARENTHESIS, expression.substr(start, cursor - p_start)); }
#line 206 "scanner.cpp"
yy22:
        ++cursor;
#line 50 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_EOL, expression.substr(start, cursor - p_start)); }
#line 211 "scanner.cpp"
yy24:
        ++cursor;
#line 51 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_END, expression.substr(start, cursor - p_start)); }
#line 216 "scanner.cpp"
yy26:
        yych = (unsigned char)*++cursor;
        goto yy10;
yy27:
        yych = (unsigned char)*++cursor;
        goto yy13;
yy28:
        ++cursor;
        yych = (unsigned char)*cursor;
yy29:
        switch (yych) {
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'F':
        case 'G':
        case 'H':
        case 'I':
        case 'J':
        case 'K':
        case 'L':
        case 'M':
        case 'N':
        case 'O':
        case 'P':
        case 'Q':
        case 'R':
        case 'S':
        case 'T':
        case 'U':
        case 'V':
        case 'W':
        case 'X':
        case 'Y':
        case 'Z':
        case '_':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'f':
        case 'g':
        case 'h':
        case 'i':
        case 'j':
        case 'k':
        case 'l':
        case 'm':
        case 'n':
        case 'o':
        case 'p':
        case 'q':
        case 'r':
        case 's':
        case 't':
        case 'u':
        case 'v':
        case 'w':
        case 'x':
        case 'y':
        case 'z':    goto yy28;
        default:    goto yy5;
        }
yy30:
        ++cursor;
        yych = (unsigned char)*cursor;
yy31:
        switch (yych) {
        case '"':    goto yy34;
        case '\\':    goto yy32;
        default:    goto yy30;
        }
yy32:
        ++cursor;
        yych = (unsigned char)*cursor;
        switch (yych) {
        case '"':
        case '\\':    goto yy30;
        default:    goto yy33;
        }
yy33:
        cursor = marker;
        switch (yyaccept) {
        case 0: 	goto yy8;
        case 1: 	goto yy10;
        }
yy34:
        ++cursor;
#line 45 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_STRING, expression.substr(1 + start, cursor - p_start - 2)); }
#line 320 "scanner.cpp"
yy36:
        yyaccept = 0;
        marker = ++cursor;
        yych = (unsigned char)*cursor;
        switch (yych) {
        case '.':    goto yy38;
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy36;
        case 'E':
        case 'e':    goto yy40;
        default:    goto yy8;
        }
yy38:
        yyaccept = 0;
        marker = ++cursor;
        yych = (unsigned char)*cursor;
yy39:
        switch (yych) {
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy38;
        case 'E':
        case 'e':    goto yy40;
        default:    goto yy8;
        }
yy40:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '+':
        case '-':    goto yy41;
        default:    goto yy33;
        }
yy41:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy42;
        default:    goto yy33;
        }
yy42:
        ++cursor;
        yych = (unsigned char)*cursor;
        switch (yych) {
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':    goto yy42;
        default:    goto yy8;
        }
yy44:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'L':
        case 'l':    goto yy45;
        default:    goto yy29;
        }
yy45:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'S':
        case 's':    goto yy46;
        default:    goto yy29;
        }
yy46:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'E':
        case 'e':    goto yy47;
        default:    goto yy29;
        }
yy47:
        ++cursor;
        switch ((yych = (unsigned char)*cursor)) {
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'F':
        case 'G':
        case 'H':
        case 'I':
        case 'J':
        case 'K':
        case 'L':
        case 'M':
        case 'N':
        case 'O':
        case 'P':
        case 'Q':
        case 'R':
        case 'S':
        case 'T':
        case 'U':
        case 'V':
        case 'W':
        case 'X':
        case 'Y':
        case 'Z':
        case '_':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'f':
        case 'g':
        case 'h':
        case 'i':
        case 'j':
        case 'k':
        case 'l':
        case 'm':
        case 'n':
        case 'o':
        case 'p':
        case 'q':
        case 'r':
        case 's':
        case 't':
        case 'u':
        case 'v':
        case 'w':
        case 'x':
        case 'y':
        case 'z':    goto yy28;
        default:    goto yy48;
        }
yy48:
#line 42 "scanner.re"
        { offset += cursor - p_start; return CToken(ET_BOOLEAN, expression.substr(start, cursor - p_start)); }
#line 491 "scanner.cpp"
yy49:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'U':
        case 'u':    goto yy50;
        default:    goto yy29;
        }
yy50:
        yych = (unsigned char)*++cursor;
        switch (yych) {
        case 'E':
        case 'e':    goto yy47;
        default:    goto yy29;
        }
yy51:
        ++cursor;
        yych = (unsigned char)*cursor;
yy52:
        switch (yych) {
        case '\t':
        case ' ':    goto yy51;
        default:    goto yy2;
        }
    }
#line 54 "scanner.re"

}
}
